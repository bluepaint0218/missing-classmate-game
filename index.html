<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆå¤±çš„åŒæ¡Œ - The Vanished Deskmate (Ver 17.0 Final)</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Share+Tech+Mono&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #050505;
            color: #d4d4d4;
            overflow: hidden;
            user-select: text;
        }

        .font-mono { font-family: 'Share Tech Mono', monospace; }
        .font-serif { font-family: 'Noto Serif SC', serif; }
        .font-hand { font-family: 'Ma Shan Zheng', cursive; }

        /* CRT æ‰«æçº¿ */
        .scanlines {
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.1) 50%,
                rgba(0,0,0,0.1)
            );
            background-size: 100% 4px;
            position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
            pointer-events: none; z-index: 60;
        }

        /* æ‰«ææ¡åŠ¨ç”» */
        .scan-bar {
            position: fixed;
            left: 0; right: 0;
            height: 10px;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            opacity: 0;
            z-index: 61;
            pointer-events: none;
            animation: scan-move 8s linear infinite;
        }
        @keyframes scan-move {
            0% { top: -10%; opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { top: 110%; opacity: 0; }
        }

        /* å…¨å±€è´Ÿç‰‡æ•ˆæœå®¹å™¨ */
        .glitch-container {
            width: 100%;
            height: 100%;
            transition: filter 0.1s;
        }
        
        .glitch-active {
            animation: invert-shake 0.2s infinite;
            filter: invert(1) contrast(1.2);
        }

        @keyframes invert-shake {
            0% { transform: translate(0,0); }
            25% { transform: translate(-2px, 1px); }
            50% { transform: translate(1px, -1px); }
            75% { transform: translate(2px, 0); }
            100% { transform: translate(0, 0); }
        }

        /* 3D ç¿»è½¬é€šç”¨ */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        /* çº¸å¼ çº¹ç† */
        .paper-texture {
            background-color: #f4f1ea;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d1d5db' fill-opacity='0.2'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7z'/%3E%3C/g%3E%3C/svg%3E");
        }

        /* åŠ¨æ€é›¾å¹²æ‰° */
        .fog-overlay {
            background: radial-gradient(circle at 50% 50%, transparent 20%, rgba(255,255,255,0.95) 100%),
                        url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.8'/%3E%3C/svg%3E");
            transition: opacity 0.8s ease;
            mix-blend-mode: hard-light;
        }

        /* æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #666; }
        
        .fade-enter { opacity: 0; }
        .fade-enter-active { opacity: 1; transition: opacity 500ms ease-in; }
        
        .typewriter-text {
            overflow: hidden;
            white-space: pre-wrap;
            animation: typing 0.05s steps(1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- éŸ³æ•ˆç³»ç»Ÿ ---
        const AudioSystem = () => {
            const [isNoiseOn, setIsNoiseOn] = useState(false);
            const audioCtxRef = useRef(null);
            const noiseNodeRef = useRef(null);

            const initAudio = () => {
                if (!audioCtxRef.current) {
                    audioCtxRef.current = new (window.AudioContext || window.webkitAudioContext)();
                }
                return audioCtxRef.current;
            };

            const toggleNoise = () => {
                const ctx = initAudio();
                if (isNoiseOn) {
                    if (noiseNodeRef.current) { noiseNodeRef.current.stop(); noiseNodeRef.current = null; }
                    setIsNoiseOn(false);
                } else {
                    const bufferSize = ctx.sampleRate * 2;
                    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) {
                        data[i] = (Math.random() * 2 - 1) * 0.02; 
                    }
                    const noise = ctx.createBufferSource();
                    noise.buffer = buffer;
                    noise.loop = true;
                    const gain = ctx.createGain();
                    gain.gain.value = 0.1;
                    noise.connect(gain);
                    gain.connect(ctx.destination);
                    noise.start();
                    noiseNodeRef.current = noise;
                    setIsNoiseOn(true);
                }
            };

            window.playTone = (duration, frequency = 700) => {
                const ctx = initAudio();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(frequency, ctx.currentTime);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + duration);
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                osc.stop(ctx.currentTime + duration);
            };

            return (
                <button onClick={toggleNoise} className={`fixed bottom-4 right-4 z-50 px-3 py-1 text-xs font-mono border rounded transition-colors opacity-40 hover:opacity-100 ${isNoiseOn ? 'text-green-500 border-green-500 bg-black' : 'text-gray-500 border-gray-700 bg-black'}`}>
                    {isNoiseOn ? "SIGNAL: STABLE" : "SIGNAL: LOST"}
                </button>
            );
        };

        // --- 1. ç°å®ä¸–ç•Œ (Intro) ---
        const RealWorldIntro = ({ onEnter }) => {
            return (
                <div className="h-screen w-full bg-stone-200 flex items-center justify-center p-8 text-stone-900 font-serif selection:bg-stone-400">
                    <div className="max-w-2xl space-y-8 animate-fade-in">
                        <div className="border-l-4 border-black pl-6 py-2">
                            <h1 className="text-4xl font-bold mb-2">æ—©è¯»è¯¾ï¼š7:10 AM</h1>
                            <p className="text-stone-600 italic">æ•™å®¤å‰æ’çš„ç©ºåº§ä½</p>
                        </div>
                        <p className="text-lg leading-loose">
                            å‰æ’é çª—çš„ä½ç½®æ˜¯ç©ºçš„ã€‚é˜³å…‰é€è¿‡ç»ç’ƒæ´’åœ¨å¸ƒæ»¡åˆ»ç—•çš„è¯¾æ¡Œä¸Šï¼Œå°˜åŸƒåœ¨å…‰æŸ±ä¸­é£èˆï¼Œå”¯ç‹¬å°‘äº†é‚£ä¸ªèº«å½±ã€‚<br/>
                            æˆ‘çš„å‰æ¡Œï¼Œé™ˆé»˜ã€‚é‚£ä¸ªæ€»æ˜¯ç©¿ç€æ´—å¾—å‘ç™½çš„æ ¡æœï¼Œæ²‰é»˜å¾—åƒç©ºæ°”ä¸€æ ·çš„ç”·ç”Ÿã€‚<br/>
                            ä»–æ€»æ˜¯æœ€æ—©ä¸€ä¸ªåˆ°æ•™å®¤å¼€çª—ï¼Œæœ€æ™šä¸€ä¸ªç¦»å¼€å…³ç¯ã€‚
                        </p>
                        <p className="text-lg leading-loose">
                            ä½†ä»Šå¤©ï¼Œæ—©è¯»è¯¾çš„é“ƒå£°å“äº†å¾ˆä¹…ï¼Œä»–çš„åº§ä½ä¾ç„¶ç©ºè¡è¡çš„ã€‚<br/>
                            æ²¡æœ‰è¯·å‡æ¡ï¼Œæ²¡æœ‰æ¶ˆæ¯ï¼Œå°±åƒæ°´è’¸æ°”ä¸€æ ·ï¼Œåœ¨è¿™ä¸ªå¹³å‡¡çš„æ—©æ™¨å½»åº•è’¸å‘äº†ã€‚<br/>
                            æˆ‘è¶è€å¸ˆä¸æ³¨æ„ï¼Œä¼¸æ‰‹æ¢å‘ä»–çš„æ¡Œæ´ã€‚é‡Œé¢åªæœ‰ä¸€å¼ æ’•ä¸‹æ¥çš„ä¾¿åˆ©è´´ï¼Œä¸Šé¢å†™ç€ä¸€ä¸²æ½¦è‰çš„ç½‘å€ï¼š
                        </p>
                        <div className="bg-white p-6 shadow-lg transform rotate-1 border border-stone-300 text-center cursor-pointer hover:scale-105 transition group" onClick={onEnter}>
                            <p className="font-mono text-2xl tracking-widest border-b-2 border-dashed border-gray-400 inline-block pb-1 mb-2 group-hover:text-blue-700">chenmo-space.top</p>
                            <p className="text-xs text-gray-400 mt-2">(ç‚¹å‡»è¿›å…¥å›å¿†)</p>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 2. 404 é¡µé¢ ---
        const NotFoundPage = ({ navigate }) => (
            <div className="h-full min-h-screen w-full flex flex-col items-center justify-center bg-white text-center p-8">
                <div className="flex-1 flex flex-col justify-center items-center w-full">
                    <h1 className="text-9xl font-bold text-gray-200 mb-4 select-none">404</h1>
                    <h2 className="text-3xl font-bold text-gray-700 mb-2">Site Not Found</h2>
                    <p className="text-gray-500 mb-12 font-mono text-sm">
                        The URL <span className="bg-gray-100 px-2 text-red-500">/chenmo-space.top</span> is unreachable.<br/>
                        Server Response: Account Inactive since 2023.
                    </p>
                    <div className="border-t border-gray-200 pt-8 w-full max-w-md">
                        <div className="flex items-center justify-between bg-gray-50 p-4 rounded border border-gray-300">
                            <div className="text-left">
                                <p className="font-bold text-sm text-gray-800">Wayback Machine Archive</p>
                                <p className="text-xs text-gray-500">Found 1 snapshot (Oct 24, 2023)</p>
                            </div>
                            <button onClick={() => navigate("wayback.html")} className="bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700 transition">
                                æ¢å¤å­˜æ¡£
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        );

        // --- 3. æœç´¢æ— ç»“æœé¡µé¢ ---
        const NoResultPage = ({ term, navigate }) => {
            let hint = "";
            if (term === "broad") {
                hint = "æç¤ºï¼šå…‰å½±æ˜¯æ¬ºéª—è§†è§‰çš„è‰ºæœ¯ã€‚åªæœ‰åœ¨ç”µå‹ä¸ç¨³ã€å…‰å½±å˜åŒ–æ—¶(Wait for the glitch)ï¼ŒçœŸæ­£çš„ä¿¡å·æ‰ä¼šæ˜¾ç°ã€‚";
            }
            
            return (
                <div className="h-full bg-[#111] text-gray-400 font-mono p-8 flex flex-col items-center justify-center">
                    <div className="border border-red-900 bg-red-900/10 p-8 max-w-md w-full text-center">
                        <h2 className="text-red-500 text-2xl font-bold mb-4">ERROR: 404</h2>
                        <p className="mb-4">è®°å¿†ç¢ç‰‡æœªæ‰¾åˆ°: <span className="text-white border-b border-gray-500">"{term}"</span></p>
                        {hint && <div className="mt-4 p-4 bg-yellow-900/20 text-yellow-500 text-sm border border-yellow-700">{hint}</div>}
                        <p className="text-xs text-gray-500 mt-8 mb-8">
                            The requested memory fragment is either corrupted or does not exist in the current timeline.
                        </p>
                        <button onClick={() => navigate("index.html")} className="px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white text-sm">
                            è¿”å›ä¸»é¡µ
                        </button>
                    </div>
                </div>
            );
        };

        // --- 3.5 ç©ºç•Œé¢ (æœç´¢é™ˆé»˜) ---
        const EmptySpace = ({ navigate }) => (
            <div className="h-full bg-white flex flex-col items-center justify-center cursor-none">
                <div className="w-2 h-12 bg-black animate-pulse"></div>
                <div className="absolute bottom-10 text-xs text-gray-300 font-mono">nothing here but silence</div>
                <button onClick={() => navigate("index.html")} className="absolute top-4 left-4 text-gray-400 hover:text-black">â†</button>
            </div>
        );

        // --- 4. åšå®¢ä¸»é¡µ (æ ¸å¿ƒæ¢çº½) ---
        const BlogIndex = ({ navigate, onLogin }) => {
            const [search, setSearch] = useState("");
            const [searching, setSearching] = useState(false);
            const [account, setAccount] = useState("");
            const [password, setPassword] = useState("");

            const handleSearch = (e) => {
                e.preventDefault();
                const term = search.trim().toLowerCase();
                setSearching(true);
                
                setTimeout(() => {
                    setSearching(false);
                    if (["æ•°å­¦", "è¯•å·", "58", "58åˆ†", "math"].some(k => term.includes(k))) {
                        navigate("math.html");
                    } else if (["å·¥ç‰Œ", "åç‰‡", "å·¥ä½œè¯", "badge", "card"].some(k => term.includes(k))) {
                        navigate("badge.html");
                    } else if (["å›¾ä¹¦é¦†", "ä¹¦", "library"].some(k => term.includes(k))) {
                        navigate("library.html");
                    } else if (["ç¾æœ¯", "art", "é›•å¡‘"].some(k => term.includes(k))) {
                        navigate("art.html");
                    } else if (["broad", "broadcast", "broad cast", "å¹¿æ’­"].some(k => term.includes(k))) {
                        if (term.includes("cast") || term.includes("å¹¿æ’­") || term.includes("cast")) navigate("radio.html");
                        else navigate("no_result:broad");
                    } else if (["é—¨ç¦", "access", "entry"].some(k => term.includes(k))) {
                        navigate("smarthome.html");
                    } else if (["class", "ç­çº§", "ç¾¤", "chat"].some(k => term.includes(k))) {
                        navigate("class.html");
                    } else if (["æœ‹å‹åœˆ", "moments", "åŠ¨æ€"].some(k => term.includes(k))) {
                        navigate("moments.html");
                    } else if (["äº‘ç›˜", "cloud"].some(k => term.includes(k))) {
                        navigate("cloud.html");
                    } else if (["qq", "zone", "ç©ºé—´"].some(k => term.includes(k))) {
                        navigate("qqzone.html");
                    } else if (["é™ˆå»ºå›½", "çˆ¸çˆ¸", "çˆ¶äº²", "father"].some(k => term.includes(k))) {
                        navigate("father_chat.html");
                    } else if (["é‚®ä»¶", "ä¿¡", "email"].some(k => term.includes(k))) {
                        navigate("email.html");
                    } else if (["é™ˆé»˜", "chenmo", "me"].some(k => term.includes(k))) {
                        navigate("empty.html");
                    } else {
                        navigate(`no_result:${term}`);
                    }
                }, 800);
            };

            const handleLogin = () => {
                if (account === "20210904") {
                    if (password === "20101105") {
                        onLogin();
                    } else if (password === "1105") {
                        alert("æç¤ºï¼š\nåˆå§‹å¯†ç ä¸ºå®Œæ•´ç”Ÿæ—¥ (YYYYMMDD)\n(çº¿ç´¢ï¼š2023å¹´æˆ‘æ˜¯å…«å¹´çº§)");
                    } else {
                        alert("ç™»å½•å¤±è´¥ã€‚");
                    }
                } else {
                    alert("ç™»å½•å¤±è´¥ã€‚");
                }
            };

            const forgotPassword = () => {
                alert("ã€ç³»ç»Ÿæç¤ºã€‘\nè´¦å·æ ¼å¼ï¼šç”¨æˆ·å­¦å· (School ID)\nå¯†ç æ ¼å¼ï¼šç”¨æˆ·ç”Ÿæ—¥ (Birthday YYYYMMDD)");
            };

            return (
                <div className="h-full w-full bg-[#f0f2f5] overflow-y-auto text-black font-sans">
                    <div className="bg-white shadow-sm sticky top-0 z-20">
                        <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center space-x-4">
                                <div className="text-2xl font-black tracking-tighter cursor-pointer" onClick={()=>navigate("index.html")}>CM's ZONE</div>
                            </div>
                            <form onSubmit={handleSearch} className="relative flex items-center">
                                <input 
                                    type="text" 
                                    placeholder="æœç´¢è®°å¿†å…³é”®è¯..." 
                                    className="bg-gray-100 rounded-full px-4 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-300 w-40 transition-all focus:w-64 disabled:opacity-50"
                                    value={search}
                                    onChange={e => setSearch(e.target.value)}
                                    disabled={searching}
                                />
                                <button type="submit" className="absolute right-3 top-1.5 text-gray-400 text-xs hover:text-blue-500">
                                    {searching ? "..." : "ğŸ”"}
                                </button>
                            </form>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto p-4 sm:p-6 flex flex-col sm:flex-row gap-6">
                        {/* ä¾§è¾¹æ ï¼šç™»å½•æ¡† */}
                        <div className="w-full sm:w-1/3 space-y-6 order-2 sm:order-1">
                            <div className="bg-white p-6 rounded shadow-sm text-center">
                                <div className="w-20 h-20 bg-gray-200 rounded-full mx-auto mb-3 overflow-hidden border-2 border-gray-100">
                                    <div className="w-full h-full bg-stone-300 flex items-center justify-center text-3xl">ğŸŒŒ</div>
                                </div>
                                <h3 className="font-bold mb-4">Silence</h3>
                                
                                <div className="text-left space-y-3 border-t pt-4">
                                    <p className="text-xs text-gray-400 font-bold">åšä¸»ç™»å½•</p>
                                    <input className="w-full border p-2 text-sm bg-gray-50" placeholder="è´¦å· (Account)" value={account} onChange={e=>setAccount(e.target.value)}/>
                                    <input className="w-full border p-2 text-sm bg-gray-50" type="password" placeholder="å¯†ç  (Password)" value={password} onChange={e=>setPassword(e.target.value)}/>
                                    <button onClick={handleLogin} className="w-full bg-black text-white py-2 text-sm hover:bg-gray-800 transition">ç™»å½•</button>
                                    <div className="text-center mt-2">
                                        <button onClick={forgotPassword} className="text-xs text-blue-500 hover:text-blue-700 underline">
                                            å¿˜è®°å¯†ç ?
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* æ–‡ç« æµ */}
                        <div className="w-full sm:w-2/3 space-y-6 order-1 sm:order-2">
                            {/* ç½®é¡¶åšæ–‡ */}
                            <div className="bg-white p-6 rounded shadow-sm border-t-4 border-black relative overflow-hidden">
                                <div className="text-xs text-gray-400 mb-2">2023.10.24 [ç½®é¡¶]</div>
                                <h2 className="text-xl font-bold mb-2">æœ€åä¸€å¤©</h2>
                                <p className="text-gray-600 text-sm leading-relaxed">
                                    æˆ‘æŠŠæˆ‘çš„ä¸–ç•Œåˆ‡æˆäº†ä¸¤åŠã€‚<br/>
                                    ä¸€åŠæ˜¯æ‰€è°“çš„æ¸¯æ¹¾ï¼Œä½†æˆ‘åªæ„Ÿåˆ°å†°å†·ã€‚<br/>
                                    å¦ä¸€åŠæ˜¯æ‰€è°“çš„ç¥åœ£æ®¿å ‚ï¼Œä½†æˆ‘åªè§‰å¾—åƒä¸ªç¬¼å­ã€‚<br/>
                                    <br/>
                                    å†è§äº†ã€‚
                                </p>
                            </div>

                             {/* åšæ–‡ 1ï¼šå­¦æ ¡çº¿å…¥å£ */}
                            <div className="bg-white p-6 rounded shadow-sm">
                                <div className="text-xs text-gray-400 mb-2">2023.10.22</div>
                                <h2 className="text-lg font-bold mb-2">çº¢è‰²çš„å‰</h2>
                                <p className="text-gray-600 text-sm leading-relaxed">
                                    åˆæ˜¯é‚£ä¸ªé²œçº¢çš„æ•°å­—ã€‚58ã€‚<br/>
                                    è€å¸ˆæŠŠè¯•å·æ‰”ç»™æˆ‘çš„æ—¶å€™ï¼Œå…¨ç­éƒ½åœ¨çœ‹ã€‚<br/>
                                    æˆ‘æŠŠå®ƒæ‰æˆä¸€å›¢å¡è¿›äº†ä¹¦åŒ…æœ€åº•å±‚ã€‚<br/>
                                    å¦‚æœå¯ä»¥ï¼Œæˆ‘çœŸæƒ³æŠŠé‚£å¼ <span className="bg-yellow-100 px-1">æ•°å­¦è¯•å·</span>çƒ§æˆç°ã€‚
                                </p>
                            </div>

                            {/* åšæ–‡ 2ï¼šå®¶åº­çº¿å…¥å£ */}
                            <div className="bg-white p-6 rounded shadow-sm">
                                <div className="text-xs text-gray-400 mb-2">2023.10.21</div>
                                <h2 className="text-lg font-bold mb-2">ç¼ºå¸­</h2>
                                <p className="text-gray-600 text-sm leading-relaxed">
                                    ä»Šå¤©ä»–åˆä¸å›å®¶åƒé¥­ã€‚<br/>
                                    ä¹Ÿæ˜¯ï¼Œå¯¹ä»–æ¥è¯´ï¼Œé‚£ä¸ªæŒ‚ç€è“è‰²æŒ‚ç»³çš„<span className="bg-blue-100 px-1">å·¥ç‰Œ</span>æ¯”è¿™ä¸ªå®¶é‡è¦å¤šäº†ã€‚<br/>
                                    ä»–ç”šè‡³èµ°å¾—å¤ªæ€¥ï¼ŒæŠŠå·¥ç‰Œéƒ½è½åœ¨ç„å…³çš„æŸœå­ä¸Šäº†ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- ç‰©å“ï¼šæ•°å­¦è¯•å· ---
        const MathPaper = () => {
            const [flipped, setFlipped] = useState(false);
            return (
                <div className="w-full h-full bg-stone-200 p-4 flex justify-center overflow-y-auto items-center">
                    <div className="relative w-[600px] h-[800px] perspective-1000">
                        <div className={`relative w-full h-full transition-transform duration-700 transform-style-3d shadow-2xl ${flipped ? 'rotate-y-180' : ''}`} onClick={() => setFlipped(!flipped)}>
                            {/* æ­£é¢ */}
                            <div className="absolute w-full h-full bg-white p-10 backface-hidden paper-texture text-black border border-gray-300 cursor-pointer overflow-hidden">
                                <div className="flex justify-between border-b-2 border-black pb-4 mb-8">
                                    <div><h1 className="text-xl font-serif font-bold">å…«å¹´çº§æœŸä¸­æµ‹è¯• - æ•°å­¦</h1><p className="mt-1">ç­çº§ï¼š09 / å§“åï¼šé™ˆé»˜</p></div>
                                    <div className="text-7xl font-hand text-red-600 rotate-[-12deg] font-bold opacity-90">58</div>
                                </div>
                                <div className="space-y-6 font-serif text-base relative">
                                    {/* æ¨¡ç³Šçš„é¢˜ç›® */}
                                    <div className="opacity-40 blur-[1px] space-y-4 select-none">
                                        <p>1. è®¡ç®— âˆš(12) + âˆš(27) çš„ç»“æœ...</p>
                                        <p>2. å·²çŸ¥ x = âˆš3 + 1, æ±‚ xÂ² - 2x...</p>
                                        <p>3. äºŒæ¬¡æ ¹å¼ âˆš(a-1) æœ‰æ„ä¹‰çš„æ¡ä»¶...</p>
                                        <p>4. åŒ–ç®€: 1/(âˆš2 + 1) ...</p>
                                        <p>...</p>
                                    </div>
                                    <div className="p-3 bg-red-50 text-red-800 text-sm border-l-4 border-red-800 relative z-10 transform rotate-1">
                                        <span className="font-bold">è€å¸ˆæ‰¹è¯­ï¼š</span> å¿ƒæ€å®Œå…¨ä¸åœ¨è¯¾å ‚ä¸Šï¼å¤©å¤©å¾€<span className="font-bold text-lg underline">å›¾ä¹¦é¦†</span>é‡Œè·‘ï¼
                                    </div>
                                </div>
                                <div className="absolute bottom-4 w-full text-center text-gray-400 text-xs">ç‚¹å‡»ç¿»çœ‹èƒŒé¢</div>
                            </div>
                            {/* èƒŒé¢ */}
                            <div className="absolute w-full h-full bg-white p-10 backface-hidden rotate-y-180 paper-texture text-black border border-gray-300 cursor-pointer flex flex-col items-center justify-center">
                                <div className="font-mono text-xl mb-8 border-2 border-dashed border-gray-400 p-6 bg-gray-50 w-full text-center">
                                    <p className="mb-4 text-sm text-gray-500">é™„åŠ é¢˜ï¼šåˆ†å¼è¿ç®— (æœªè§£å‡º)</p>
                                    <p className="font-bold text-lg leading-relaxed">
                                        ( âˆš(2000) - 10âˆš(5) ) / âˆš(4) <br/> 
                                        + | -1000 | - 30 + 15
                                    </p>
                                    <p className="text-xs text-gray-400 mt-2">ï¼ˆè§£ï¼šåŸå¼ = ?ï¼‰</p>
                                </div>
                                <div className="text-9xl font-black text-red-600 opacity-20 select-none">?</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- å­¦æ ¡çº¿ 2ï¼šå›¾ä¹¦é¦† ---
        const Library = () => {
            const [query, setQuery] = useState("");
            const [msg, setMsg] = useState(null);
            
            const search = (e) => {
                e.preventDefault();
                if (query === "985") {
                    setMsg({ type: "success", text: "æ£€ç´¢åˆ°ä¹¦ç±ï¼šã€Šè§†è§‰æ¬ºéª—è‰ºæœ¯ã€‹ã€‚å€Ÿé˜…çŠ¶æ€ï¼šé—å¤±ã€‚å¤‡æ³¨ï¼šä¹¦ä¸­å…³äº'å…‰å½±ä¸é”™è§‰'çš„æ’å›¾è¢«æ’•ä¸‹æ¥äº†ï¼Œä¼¼ä¹æœ‰äººæŠŠå®ƒè´´åœ¨äº†ç¾æœ¯æ•™å®¤çš„é›•å¡‘ä¸Šã€‚" });
                } else {
                    setMsg({ type: "error", text: "æœªæ‰¾åˆ°è¯¥ç´¢ä¹¦å·ã€‚" });
                }
            };
            return (
                <div className="h-full bg-slate-50 p-8 flex flex-col items-center font-sans">
                     <div className="w-full max-w-lg bg-white shadow-lg p-8 mt-10">
                        <h1 className="text-2xl font-bold text-blue-900 border-b pb-4 mb-6">å›¾ä¹¦é¦†æ£€ç´¢ç»ˆç«¯</h1>
                        <form onSubmit={search} className="space-y-4">
                            <input className="w-full border p-2" placeholder="è¾“å…¥ç´¢ä¹¦å· (æ•°å­¦è¯•å·ç­”æ¡ˆ)..." value={query} onChange={e=>setQuery(e.target.value)}/>
                            <button className="bg-blue-900 text-white px-4 py-2 w-full">æŸ¥è¯¢</button>
                        </form>
                        {msg && <div className={`mt-4 p-4 ${msg.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>{msg.text}</div>}
                     </div>
                </div>
            );
        };

        // --- å­¦æ ¡çº¿ 3ï¼šç¾æœ¯æ•™å®¤ (X:50, Y:180, Z:100) ---
        const ArtRoom = ({ isGlitching }) => {
            const [rx, setRx] = useState(0); 
            const [ry, setRy] = useState(0); 
            const [rz, setRz] = useState(0); 
            const [fog, setFog] = useState(1);
            const [unlocked, setUnlocked] = useState(false);

            useEffect(() => {
                // Target: 50, 180, 100
                const dist = Math.sqrt(Math.pow(rx-50, 2) + Math.pow(ry-180, 2) + Math.pow(rz-100, 2));
                // ç™½é›¾æœºåˆ¶ï¼šè·ç¦»è¶Šè¿‘ï¼Œé›¾è¶Šæ·¡
                const opacity = Math.min(1, Math.max(0, (dist - 20) / 200)); 
                setFog(opacity);

                if (dist < 25) setUnlocked(true);
                else setUnlocked(false);
            }, [rx, ry, rz]);

            return (
                <div className="h-full bg-gray-900 text-gray-300 flex flex-col items-center justify-center p-8 relative overflow-hidden">
                    {/* åŠ¨æ€ç™½é›¾å±‚ */}
                    <div className="absolute inset-0 bg-white transition-opacity duration-500 pointer-events-none z-20" style={{opacity: fog}}></div>
                    
                    <h1 className="text-2xl font-serif text-white mb-8 z-10">ç¾æœ¯æ•™å®¤ï¼šè¿·é›¾</h1>
                    
                    <div className="perspective-1000 w-64 h-64 mb-8 border border-gray-700 bg-black relative z-0">
                        <div className="w-full h-full relative transform-style-3d transition-transform duration-200" style={{ transform: `rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)` }}>
                            
                            {/* BROAD (Center) */}
                            {/* åˆå§‹å€¾æ–œï¼šè®¾ç½®åå‘æ—‹è½¬ï¼Œä½¿å¾—é»˜è®¤(0,0,0)çœ‹èµ·æ¥æ˜¯æ­ªçš„ï¼Œåªæœ‰å½“å¤–å±‚æ—‹è½¬åˆ°(50,180,100)æ—¶ï¼Œå†…éƒ¨æ–‡å­—æ‰çœ‹èµ·æ¥æ˜¯æ­£çš„ */}
                            <div className="absolute inset-0 flex items-center justify-center text-5xl font-black text-cyan-400 backface-visible" 
                                 style={{transform: 'rotateZ(-100deg) rotateY(-180deg) rotateX(-50deg) translateZ(20px)'}}>
                                BROAD
                            </div>

                            {/* CAST (Right side, only on glitch) */}
                            {isGlitching && (
                                <div className="absolute inset-0 flex items-center justify-center text-5xl font-black text-red-500 backface-visible animate-pulse" 
                                     style={{transform: 'translateX(120px) translateZ(20px)'}}>
                                    CAST
                                </div>
                            )}
                        </div>
                    </div>

                    <div className="space-y-4 w-64 z-30 bg-gray-900/80 p-4 rounded backdrop-blur-sm border border-gray-700">
                        <div className="flex justify-between text-xs"><span>X</span><span>{rx}Â°</span></div>
                        <input type="range" min="0" max="360" value={rx} onChange={e=>setRx(Number(e.target.value))} className="w-full h-1 bg-gray-600 appearance-none rounded"/>
                        <div className="flex justify-between text-xs"><span>Y</span><span>{ry}Â°</span></div>
                        <input type="range" min="0" max="360" value={ry} onChange={e=>setRy(Number(e.target.value))} className="w-full h-1 bg-gray-600 appearance-none rounded"/>
                        <div className="flex justify-between text-xs"><span>Z</span><span>{rz}Â°</span></div>
                        <input type="range" min="0" max="360" value={rz} onChange={e=>setRz(Number(e.target.value))} className="w-full h-1 bg-gray-600 appearance-none rounded"/>
                    </div>
                    
                    <div className="mt-8 text-xs text-gray-500 z-30 max-w-xs text-center">
                        æç¤ºï¼šåœ¨è¿·é›¾ä¸­å¯»æ‰¾æ­£ç¡®çš„è§’åº¦ã€‚ç­”æ¡ˆä¼šåœ¨å…‰å½±å¼‚å˜(Glitch)æ—¶å®Œæ•´æ˜¾ç°ã€‚
                    </div>
                </div>
            );
        };

        // --- å­¦æ ¡çº¿ 4ï¼šå¹¿æ’­å®¤ ---
        const MorsePuzzle = () => {
            const [step, setStep] = useState(0); 
            const [finished, setFinished] = useState(false);
            const letters = [
                { char: 'C', code: [3, 1, 3, 1] }, 
                { char: 'L', code: [1, 3, 1, 1] },
                { char: 'A', code: [1, 3] },
                { char: 'S', code: [1, 1, 1] },
                { char: 'S', code: [1, 1, 1] }
            ];

            const playCurrent = async () => {
                const seq = letters[step].code;
                for (let type of seq) {
                    window.playTone(type * 0.1);
                    await new Promise(r => setTimeout(r, type * 100 + 200));
                }
            };

            const next = () => {
                if (step < 4) setStep(step + 1);
                else setFinished(true);
            };

            return (
                <div className="h-full bg-black text-green-600 font-mono flex flex-col items-center justify-center p-8">
                    <div className="border border-green-800 p-8 w-full max-w-md bg-stone-900 relative">
                        <h2 className="text-xl mb-4 border-b border-green-800 pb-2">å¹¿æ’­è®¾å¤‡ (Broadcasting)</h2>
                        {!finished ? (
                            <div className="text-center space-y-6">
                                <div className="text-4xl font-bold mb-4 text-green-500">
                                    Letter {step + 1} / 5
                                </div>
                                <div className="flex justify-center gap-4">
                                    <button onClick={playCurrent} className="bg-green-900 text-green-100 px-6 py-3 rounded hover:bg-green-800">
                                        â–¶ å¬éŸ³
                                    </button>
                                    <button onClick={next} className="border border-green-600 px-6 py-3 hover:bg-green-900/30">
                                        ä¸‹ä¸€ä¸ª â†’
                                    </button>
                                </div>
                            </div>
                        ) : (
                            <div className="animate-fade-in space-y-4">
                                <p className="text-green-400">è§£ç å®Œæˆ: <span className="font-bold text-xl">CLASS</span></p>
                                <div className="bg-black p-4 border border-green-700 text-sm">
                                    <p className="text-gray-400 mb-2">[é™ˆé»˜çš„å½•éŸ³ç•™è¨€]</p>
                                    <p>æˆ‘å¬ä¸æ‡‚ä»–ä»¬çš„è¯­è¨€ã€‚</p>
                                    <p>å»æœç´¢ <span className="text-white font-bold bg-green-900 px-1">CLASS</span> å§ã€‚</p>
                                    <p>é‚£é‡Œæœ‰æˆ‘çš„åº§ä½å·ï¼Œä½†æˆ‘ä¸çŸ¥é“æˆ‘è¿˜å±äºä¸å±äºé‚£é‡Œã€‚</p>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- å­¦æ ¡çº¿ 5ï¼šç­çº§ç¾¤ (ç‹¬ç«‹) ---
        const ClassChat = ({navigate}) => {
            return (
                <div className="h-full bg-[#f2f2f2] flex justify-center text-black font-sans overflow-hidden">
                    <div className="w-full max-w-md bg-white shadow-xl h-full flex flex-col">
                        <div className="bg-[#ededed] p-4 font-bold border-b">åˆäºŒ(09)ç­ (45äºº)</div>
                        <div className="flex-1 p-4 space-y-6 overflow-y-auto bg-[#f5f5f5]">
                            {/* ç½®é¡¶å…¬å‘Š */}
                            <div className="bg-yellow-50 p-3 border-b border-yellow-200 text-xs text-gray-700">
                                <p className="font-bold text-yellow-800 mb-1">ã€æ•™åŠ¡å¤„é€šçŸ¥ã€‘å­¦ç±æ ¸å¯¹</p>
                                <p>å­¦å·æ ¼å¼ç»Ÿä¸€ä¸ºï¼š<span className="font-bold text-red-600">å…¥å­¦å¹´ä»½ + ç­çº§å·(ä¸¤ä½) + åº§å·(ä¸¤ä½)</span>ã€‚</p>
                                <p>ä¾‹ï¼š20200101ã€‚è¯·å„ä½åŒå­¦è‡ªæŸ¥ã€‚</p>
                            </div>

                            <div className="text-center text-xs text-gray-400">2023å¹´10æœˆ24æ—¥</div>
                            
                            <div className="flex mb-2">
                                <div className="w-8 h-8 bg-blue-500 rounded mr-2"></div>
                                <div>
                                    <span className="text-xs text-gray-500">ç­ä¸»ä»»</span>
                                    <div className="bg-white border p-2 rounded text-sm shadow-sm">
                                        é™ˆé»˜æ²¡æ¥å—ï¼Ÿè°çŸ¥é“ä»–å»å“ªäº†ï¼Ÿ
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex mb-2">
                                <div className="w-8 h-8 bg-yellow-500 rounded mr-2"></div>
                                <div>
                                    <span className="text-xs text-gray-500">æå­è±ª</span>
                                    <div className="bg-white border p-2 rounded text-sm shadow-sm">
                                        ä¸çŸ¥é“ï¼Œä»–ä½ç½®ä¸€ç›´æ˜¯ç©ºçš„ã€‚<span className="font-bold">09ç­04å·</span>åº§ä½ï¼Œç©ºç€ä¹ŸæŒºå¥½ï¼Œçœå¾—çœ‹ç€å¿ƒçƒ¦ã€‚
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex mb-2">
                                <div className="w-8 h-8 bg-pink-500 rounded mr-2"></div>
                                <div>
                                    <span className="text-xs text-gray-500">ç‹ä½³ä½³</span>
                                    <div className="bg-white border p-2 rounded text-sm shadow-sm">
                                        ä»–å¥½ä¹…æ²¡æ›´æ–°QQç©ºé—´äº†ã€‚
                                        <br/>
                                        <button onClick={() => navigate("qqzone.html")} className="text-blue-500 underline mt-1">
                                            >> ç‚¹å‡»æŸ¥çœ‹é™ˆé»˜çš„QQç©ºé—´
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- å­¦æ ¡çº¿ 5.5ï¼šæœ‹å‹åœˆ (ç‹¬ç«‹é¡µé¢) ---
        const Moments = () => {
            return (
                <div className="h-full bg-[#f2f2f2] flex justify-center text-black font-sans overflow-hidden">
                    <div className="w-full max-w-md bg-white shadow-xl h-full flex flex-col">
                        <div className="flex-1 p-4 space-y-6 overflow-y-auto bg-white">
                            <div className="h-32 bg-gray-800 mb-6 relative">
                                <div className="absolute bottom-[-20px] right-4 flex items-end">
                                    <div className="text-white font-bold mr-4 mb-6">æœ‹å‹åœˆ</div>
                                    <div className="w-16 h-16 bg-gray-200 border-2 border-white"></div>
                                </div>
                            </div>

                            {/* å…³é”®çº¿ç´¢ï¼šé™ˆé»˜çš„ç”Ÿæ—¥æœ‹å‹åœˆ */}
                            <div className="border-b pb-4 opacity-60">
                                <div className="flex gap-2 mb-2">
                                    <div className="w-10 h-10 bg-gray-300 rounded"></div>
                                    <div>
                                        <p className="text-blue-800 font-bold text-sm">é™ˆé»˜</p>
                                        <p className="text-xs text-gray-500">11æœˆ5æ—¥</p>
                                    </div>
                                </div>
                                <p className="text-sm mb-2">ç¥æˆ‘ç”Ÿæ—¥å¿«ä¹ã€‚ğŸ”’ (ä»…å®¶äººå¯è§)</p>
                            </div>

                            {/* å¦ˆå¦ˆçš„æœ‹å‹åœˆ */}
                            <div className="border-b pb-4">
                                <div className="flex gap-2 mb-2">
                                    <div className="w-10 h-10 bg-red-800 rounded"></div>
                                    <div>
                                        <p className="text-blue-800 font-bold text-sm">å¦ˆå¦ˆ</p>
                                        <p className="text-xs text-gray-500">11æœˆ5æ—¥</p>
                                    </div>
                                </div>
                                <p className="text-sm mb-2">äººç”Ÿæ²¡æœ‰ç™½èµ°çš„è·¯ï¼Œæ¯ä¸€æ­¥éƒ½ç®—æ•°ã€‚åªè¦åŠªåŠ›ï¼Œå°±èƒ½çœ‹åˆ°å½©è™¹ã€‚è½¬å‘ï¼š[æ·±åº¦å¥½æ–‡]ã€Šå“ˆä½›å¥³å­©çš„å…»æˆæ—¥è®°ã€‹</p>
                            </div>

                            {/* çˆ¸çˆ¸çš„æœ‹å‹åœˆ */}
                            <div className="border-b pb-4">
                                <div className="flex gap-2 mb-2">
                                    <div className="w-10 h-10 bg-gray-800 rounded"></div>
                                    <div>
                                        <p className="text-blue-800 font-bold text-sm">é™ˆå»ºå›½</p>
                                        <p className="text-xs text-gray-500">11æœˆ5æ—¥</p>
                                    </div>
                                </div>
                                <p className="text-sm mb-2">é¡¹ç›®ç¬¬äºŒé˜¶æ®µé¡ºåˆ©ä¸Šçº¿ã€‚å›¢é˜Ÿé€šå®µäº†ä¸‰ä¸ªæ™šä¸Šï¼Œè¾›è‹¦äº†ã€‚#DeepTech #WorkLife</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- å­¦æ ¡çº¿ 6ï¼šQQç©ºé—´ (è·å–å¹´ä»½) ---
        const QQZone = () => (
             <div className="h-full bg-yellow-50 overflow-y-auto text-black font-sans p-4 flex flex-col items-center">
                 <div className="w-full max-w-md bg-white border shadow-md min-h-[600px]">
                     <div className="h-32 bg-gray-800 relative">
                         <div className="absolute bottom-[-20px] left-4 w-16 h-16 bg-white p-1 rounded">
                             <div className="w-full h-full bg-gray-300"></div>
                         </div>
                         <div className="absolute bottom-2 right-4 text-white text-sm">é™ˆé»˜çš„æ˜Ÿç©º</div>
                     </div>
                     <div className="mt-8 px-4">
                         <h2 className="font-bold border-b pb-2">è¯´è¯´ (1)</h2>
                         <div className="mt-4 pb-4 border-b border-gray-100">
                             <p className="text-sm">ç»ˆäºå…¥å­¦äº†ã€‚æ–°çš„å¼€å§‹ã€‚</p>
                             <p className="text-xs text-gray-400 mt-2">2021å¹´9æœˆ1æ—¥</p>
                         </div>

                         <h2 className="font-bold border-b pb-2 mt-8">å¥½å‹åŠ¨æ€</h2>
                         <div className="mt-4 space-y-6">
                             <div className="flex gap-3">
                                 <div className="w-8 h-8 bg-blue-200 rounded-full flex-shrink-0"></div>
                                 <div>
                                     <p className="text-xs font-bold text-blue-800">å­¦å§”_å¼ æµ©</p>
                                     <p className="text-sm mt-1">è¿™æ¬¡æ•°å­¦å¤ªç®€å•äº†ï¼Œ98åˆ†ï¼Œéšä¾¿è€ƒè€ƒã€‚æœ‰äº›äººè¿åŠæ ¼éƒ½éš¾ï¼ŒçœŸä¸çŸ¥é“æ€ä¹ˆè¿›æ¥çš„ã€‚</p>
                                     <p className="text-xs text-gray-400 mt-1">10åˆ†é’Ÿå‰</p>
                                 </div>
                             </div>
                             <div className="flex gap-3">
                                 <div className="w-8 h-8 bg-green-200 rounded-full flex-shrink-0"></div>
                                 <div>
                                     <p className="text-xs font-bold text-green-800">ä½“è‚²å§”å‘˜</p>
                                     <p className="text-sm mt-1">æ–°ä¹°çš„AJï¼Œå¸…ä¸å¸…ï¼Ÿå‘¨æœ«çƒåœºè§ï¼</p>
                                     <p className="text-xs text-gray-400 mt-1">30åˆ†é’Ÿå‰</p>
                                 </div>
                             </div>
                             <div className="flex gap-3">
                                 <div className="w-8 h-8 bg-purple-200 rounded-full flex-shrink-0"></div>
                                 <div>
                                     <p className="text-xs font-bold text-purple-800">ç­é•¿</p>
                                     <p className="text-sm mt-1">ç­çº§å¤§åˆç…§æ¥å•¦ï¼å¤§å®¶éƒ½ç¬‘å¾—å¥½å¼€å¿ƒï¼(æŸäººåˆèº²åœ¨è§’è½é‡Œæ²¡æ‹è¿›å»å“ˆå“ˆ)</p>
                                     <p className="text-xs text-gray-400 mt-1">1å°æ—¶å‰</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
        );

        // --- å®¶åº­çº¿ 1ï¼šå·¥ç‰Œ ---
        const WorkBadge = () => {
            const [flipped, setFlipped] = useState(false);
            return (
                <div className="w-full h-full bg-stone-800 p-4 flex justify-center items-center">
                    <div className="relative w-[300px] h-[500px] perspective-1000">
                        <div className={`relative w-full h-full transition-transform duration-700 transform-style-3d shadow-2xl ${flipped ? 'rotate-y-180' : ''}`} onClick={() => setFlipped(!flipped)}>
                            {/* æ­£é¢ */}
                            <div className="absolute w-full h-full bg-white rounded-xl backface-hidden flex flex-col items-center pt-12 shadow-inner border border-gray-300 cursor-pointer overflow-hidden">
                                <div className="w-full h-4 bg-blue-800 absolute top-4"></div>
                                <div className="w-32 h-40 bg-gray-200 border border-gray-300 mb-6 flex items-center justify-center">
                                    <span className="text-4xl grayscale">ğŸ‘¤</span>
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-1">é™ˆå»ºå›½</h2>
                                <p className="text-gray-500 mb-8">é«˜çº§ç³»ç»Ÿå·¥ç¨‹å¸ˆ</p>
                                <div className="absolute bottom-4 text-xs text-gray-400">ç‚¹å‡»æŸ¥çœ‹èƒŒé¢</div>
                            </div>
                            {/* èƒŒé¢ */}
                            <div className="absolute w-full h-full bg-gray-100 rounded-xl backface-hidden rotate-y-180 flex flex-col items-center justify-center border border-gray-300 cursor-pointer shadow-inner">
                                <div className="w-full h-12 bg-black mb-12"></div>
                                <div className="text-left w-3/4 space-y-4">
                                    <div className="text-xs text-gray-300">
                                        è”ç³»é‚®ç®± (å­—è¿¹å¾ˆæ·¡):<br/>
                                        chen_*****@corp.com
                                    </div>
                                    <p className="font-bold text-lg text-gray-800 mt-8">é—¨ç¦å¡</p>
                                    <p className="text-xs text-gray-500">Access Control Card</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- å®¶åº­çº¿ 2ï¼šé—¨ç¦ (SmartHome) ---
        const SmartHome = () => {
            const [showHint, setShowHint] = useState(false);
            return (
             <div className="h-full bg-gray-900 text-green-400 font-mono p-8 overflow-y-auto">
                    <div className="max-w-2xl mx-auto border border-green-800 p-6 shadow-lg">
                        <h2 className="text-xl border-b border-green-800 pb-2 mb-4">é—¨ç¦ç³»ç»Ÿæ—¥å¿— (Access Log)</h2>
                        <div className="space-y-4 text-sm">
                            <div className="grid grid-cols-3 text-red-500"><span>10-01 ~ 10-24</span><span>çˆ¸çˆ¸</span><span>æ— è®°å½• (æœªå½’)</span></div>
                            
                            {!showHint ? (
                                <button onClick={() => setShowHint(true)} className="mt-4 text-xs text-yellow-500 underline hover:text-yellow-400">
                                    [å¿˜è®°å¯†ç ?]
                                </button>
                            ) : (
                                <div className="mt-4 p-4 bg-black border border-green-900 text-xs animate-fade-in">
                                    <p className="text-white font-bold mb-2">[ç³»ç»Ÿæç¤º]</p>
                                    <p>å¯†ç æç¤ºå·²å‘é€è‡³é™ˆå»ºå›½çš„äº‘ç›˜ã€‚</p>
                                    <p>äº‘ç›˜ç™»å½•è§„åˆ™ï¼š<span className="text-yellow-500">å®Œæ•´é‚®ç®±</span> + <span className="text-yellow-500">ä»–æœ€çœ‹é‡çš„ä¸œè¥¿(è‹±æ–‡)</span>ã€‚</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- å®¶åº­çº¿ 3ï¼šçˆ¶äº²èŠå¤© (è·å–é‚®ç®±å’Œå¯†ç çº¿ç´¢) ---
        const FatherChat = () => {
            const [msgs, setMsgs] = useState([]);
            const [input, setInput] = useState("");

            const send = (e) => {
                e.preventDefault();
                if(!input.trim()) return;
                const newMsgs = [...msgs, {role: 'me', text: input}];
                setMsgs(newMsgs);
                setInput("");
                
                setTimeout(() => {
                    setMsgs(prev => [...prev, {role: 'dad', text: '[è‡ªåŠ¨å›å¤] æˆ‘åœ¨å¿™å·¥ä½œ(WORK)ï¼Œæœ‰äº‹å‘é‚®ä»¶åˆ° chen_work@corp.comï¼Œå›å®¶å†è¯´ã€‚'}]);
                }, 1000);
            };

            return (
                <div className="h-full bg-gray-100 flex flex-col items-center p-4">
                    <div className="w-full max-w-md bg-white shadow-xl h-[600px] flex flex-col border border-gray-300">
                        <div className="bg-gray-800 text-white p-4 flex justify-between items-center">
                            <span>é™ˆå»ºå›½ (çˆ¸çˆ¸)</span>
                            <span className="text-xs opacity-50">ç¦»çº¿</span>
                        </div>
                        <div className="flex-1 p-4 overflow-y-auto space-y-4 bg-gray-50">
                            <div className="text-center text-xs text-gray-300 my-4">2023å¹´10æœˆ20æ—¥</div>
                            {msgs.map((m, i) => (
                                <div key={i} className={`flex ${m.role === 'me' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`p-3 rounded-lg max-w-[80%] text-sm ${m.role === 'me' ? 'bg-green-500 text-white' : 'bg-white border shadow-sm text-gray-800'}`}>
                                        {m.text}
                                    </div>
                                </div>
                            ))}
                            {msgs.length === 0 && <div className="text-center text-gray-400 text-xs mt-10">ä½ å·²ç»å¾ˆä¹…æ²¡å’Œçˆ¸çˆ¸è¯´è¯äº†...</div>}
                        </div>
                        <form onSubmit={send} className="p-3 border-t bg-white flex gap-2">
                            <input className="flex-1 border p-2 text-sm rounded bg-gray-100" placeholder="å‘é€æ¶ˆæ¯..." value={input} onChange={e=>setInput(e.target.value)}/>
                            <button className="bg-green-600 text-white px-4 text-sm rounded font-bold">å‘é€</button>
                        </form>
                    </div>
                </div>
            );
        };

        // --- å®¶åº­çº¿ 4ï¼šäº‘ç›˜ ---
        const Cloud = () => {
            const [email, setEmail] = useState("");
            const [pass, setPass] = useState("");
            const [unlocked, setUnlocked] = useState(false);
            const [tab, setTab] = useState("files");
            
            const check = () => {
                // Email: chen_work@corp.com
                // Pass: WORK (case insensitive)
                if (email === "chen_work@corp.com" && pass.toUpperCase() === "WORK") {
                    setUnlocked(true);
                } else {
                    alert("ç™»å½•å¤±è´¥ã€‚");
                }
            };

            if (unlocked) return (
                <div className="h-full bg-white p-8 font-sans">
                     <div className="max-w-2xl mx-auto">
                        <h1 className="text-2xl font-bold mb-6 text-blue-800">æˆ‘çš„äº‘ç›˜</h1>
                        <div className="flex space-x-4 border-b mb-4">
                            <button onClick={()=>setTab('files')} className={`pb-2 ${tab==='files'?'border-b-2 border-blue-500 font-bold':''}`}>æ–‡ä»¶åˆ—è¡¨</button>
                            <button onClick={()=>setTab('letter')} className={`pb-2 ${tab==='letter'?'border-b-2 border-blue-500 font-bold':''}`}>æœªè¯»ä¿¡ä»¶</button>
                        </div>

                        {tab === 'files' && (
                            <div className="space-y-4">
                                <div className="p-4 border bg-gray-50 flex items-center"><span className="mr-2">ğŸ“„</span> å·¥ä½œæ—¥æŠ¥_2023.xlsx</div>
                                <div className="p-4 border bg-gray-50 flex items-center"><span className="mr-2">ğŸ”‘</span> é—¨ç¦å¯†ç å¤‡ä»½.txt</div>
                                <div className="p-4 border bg-gray-50 flex items-center"><span className="mr-2">âœ‰ï¸</span> æ¥è‡ªå„¿å­çš„ä¿¡.pdf (å·²è‡ªåŠ¨å½’æ¡£)</div>
                            </div>
                        )}

                        {tab === 'letter' && (
                            <div className="border p-6 bg-yellow-50 shadow-sm relative group perspective-1000">
                                <div className="space-y-4">
                                    <h3 className="font-bold">è‡´çˆ¸çˆ¸</h3>
                                    <p className="text-sm text-gray-700">çˆ¸ï¼Œæˆ‘çŸ¥é“ä½ å¾ˆå¿™ã€‚æˆ‘åœ¨å­¦æ ¡å¾ˆå¥½ï¼ˆå‡çš„ï¼‰ã€‚æˆ‘ä¸æƒ³ä¸Šå­¦äº†ã€‚</p>
                                    <p className="text-sm text-gray-700">ä»Šå¤©æ˜¯æˆ‘çš„ç”Ÿæ—¥ï¼Œä½†ä½ åˆä¸åœ¨ã€‚</p>
                                    <p className="text-sm text-blue-700 font-bold mt-4">çˆ¸çˆ¸ï¼Œä»Šå¤©ç”Ÿæ—¥æˆ‘å‘äº†æœ‹å‹åœˆä½ çœ‹åˆ°äº†å—ï¼Ÿ</p>
                                </div>
                            </div>
                        )}
                     </div>
                </div>
            );

            return (
                <div className="h-full bg-gray-100 flex items-center justify-center">
                    <div className="bg-white p-8 shadow rounded w-80 text-center">
                        <h2 className="mb-4 font-bold">äº‘ç›˜ç™»å½•</h2>
                        <input className="border w-full p-2 mb-2" placeholder="é‚®ç®±" value={email} onChange={e=>setEmail(e.target.value)}/>
                        <input className="border w-full p-2 mb-4" type="password" placeholder="å¯†ç  (ä»–æœ€çœ‹é‡çš„ä¸œè¥¿)" value={pass} onChange={e=>setPass(e.target.value)}/>
                        <button onClick={check} className="bg-blue-600 text-white w-full py-2 rounded">ç™»å½•</button>
                    </div>
                </div>
            );
        };
        
        // --- é‚®ä»¶åœºæ™¯ ---
        const EmailDrafts = () => (
             <div className="h-full bg-white p-8 font-sans">
                <div className="max-w-2xl mx-auto border h-full bg-gray-50 p-6">
                    <h2 className="font-bold text-gray-700 border-b pb-2 mb-4">é‚®ä»¶</h2>
                    <p className="text-sm">å‘ä»¶äººï¼šé™ˆé»˜</p>
                    <p className="text-sm text-gray-500 mb-4">æ—¥æœŸï¼š2023-11-05</p>
                    <p className="text-sm">ç”Ÿæ—¥å¿«ä¹ï¼Œé™ˆé»˜ã€‚</p>
                </div>
            </div>
        );

        // --- ç»“å±€ ---
        const Ending = () => {
            const [scene, setScene] = useState(0);
            const dialogs = [
                "ç™»å½•æˆåŠŸã€‚æ­£åœ¨å®šä½...",
                "å®šä½åæ ‡ï¼šå­¦æ ¡æ—§æ•™å­¦æ¥¼ - é¡¶å±‚å¤©æ–‡æ´»åŠ¨å®¤ã€‚",
                "ã€2023å¹´10æœˆ24æ—¥ï¼Œä¸‹åˆã€‘",
                "ä½ æ¨å¼€äº†æ´»åŠ¨å®¤é‚£æ‰‡ç”Ÿé”ˆçš„é“é—¨ã€‚",
                "é™ˆé»˜æ­£ååœ¨è§’è½é‡Œï¼Œæˆ´ç€è€³æœºï¼Œæ‰‹é‡Œæ‹¿ç€é‚£å¼ è€ƒäº†58åˆ†çš„è¯•å·æŠ˜æˆçš„çº¸é£æœºã€‚",
                "ä»–æŠ¬èµ·å¤´ï¼Œçœ¼ç¥é‡Œæœ‰ä¸€ä¸æƒŠè®¶ï¼Œä½†æ›´å¤šçš„æ˜¯é‡Šç„¶ã€‚",
                "â€œä½ æ‰¾åˆ°æˆ‘äº†ã€‚â€ ä»–è½»å£°è¯´ã€‚",
                "â€œæˆ‘è¿˜ä»¥ä¸ºï¼Œæ²¡æœ‰äººä¼šè®°å¾—æˆ‘çš„å­¦å·ï¼Œä¹Ÿæ²¡æœ‰äººè®°å¾—æˆ‘çš„ç”Ÿæ—¥ã€‚â€",
                "ä½ å‘ä»–ä¼¸å‡ºäº†æ‰‹ã€‚",
                "é‚£ä¸€åˆ»ï¼Œæ‰€æœ‰çš„å™ªéŸ³ã€åˆ†æ•°ã€äº‰åµï¼Œéƒ½æ¶ˆå¤±äº†ã€‚",
                "åªå‰©ä¸‹çª—å¤–é€è¿›æ¥çš„ä¸€æŸå…‰ã€‚",
                "THE END"
            ];

            return (
                <div className="h-full bg-black text-white flex flex-col items-center justify-center p-8 text-center animate-fade-in font-serif cursor-pointer" onClick={() => { if(scene < dialogs.length - 1) setScene(scene + 1) }}>
                    <div className="max-w-xl text-lg leading-loose space-y-6">
                        <p className="typewriter-text text-xl">{dialogs[scene]}</p>
                        {scene < dialogs.length - 1 && <p className="text-xs text-gray-500 mt-8 animate-pulse">(ç‚¹å‡»ç»§ç»­)</p>}
                    </div>
                </div>
            );
        };

        // --- ä¸»æ§ ---
        const App = () => {
            const [stage, setStage] = useState("intro"); 
            const [url, setUrl] = useState("index.html");
            const [history, setHistory] = useState(["index.html"]);
            const [inputUrl, setInputUrl] = useState("");
            const [isGlitching, setIsGlitching] = useState(false);

            // è´Ÿç‰‡å¹²æ‰°è®¡æ—¶å™¨ï¼šæ¯120sè§¦å‘ä¸€æ¬¡ï¼ŒæŒç»­3-5s
            useEffect(() => {
                const interval = setInterval(() => {
                    setIsGlitching(true);
                    setTimeout(() => setIsGlitching(false), 4000); // 4s
                }, 120000); // 120ç§’
                
                return () => clearInterval(interval);
            }, []);

            const navigate = (target) => {
                if (target === url) return;
                setHistory(prev => [...prev, target]);
                setUrl(target);
                setInputUrl("");
            };

            const goBack = () => {
                if (history.length > 1) {
                    const newHistory = [...history];
                    newHistory.pop();
                    setHistory(newHistory);
                    setUrl(newHistory[newHistory.length - 1]);
                }
            };

            const renderContent = () => {
                if (url.startsWith("no_result:")) return <NoResultPage term={url.split(":")[1]} navigate={navigate} />;

                switch (url) {
                    case "index.html": return <BlogIndex navigate={navigate} onLogin={() => navigate("ending")} />;
                    case "math.html": return <MathPaper />;
                    case "library.html": return <Library />;
                    case "art.html": return <ArtRoom isGlitching={isGlitching} />;
                    case "radio.html": return <MorsePuzzle />;
                    case "badge.html": return <WorkBadge />;
                    case "class.html": return <ClassChat navigate={navigate} />;
                    case "moments.html": return <Moments />; // ç‹¬ç«‹é¡µé¢
                    case "qqzone.html": return <QQZone />;
                    case "father_chat.html": return <FatherChat />;
                    case "smarthome.html": return <SmartHome />;
                    case "cloud.html": return <Cloud />;
                    case "email.html": return <EmailDrafts />;
                    case "empty.html": return <EmptySpace navigate={navigate} />;
                    case "ending": return <Ending />;
                    case "wayback.html": return <BlogIndex navigate={navigate} onLogin={() => navigate("ending")} />;
                    default: return <NotFoundPage navigate={() => setUrl("index.html")} />;
                }
            };

            if (stage === "intro") return <RealWorldIntro onEnter={() => setStage("404")} />;
            if (stage === "404") return <NotFoundPage navigate={(page) => setStage("wayback")} />;
            if (stage === "wayback") return (
                <div className="h-screen bg-white flex flex-col items-center pt-32 font-sans text-black">
                    <h1 className="text-6xl font-bold mb-4">Wayback Machine</h1>
                    <div className="w-full max-w-2xl px-6">
                        <form onSubmit={(e) => { e.preventDefault(); if(inputUrl.includes("chenmo")) setStage("browser"); }} className="flex border h-16 rounded overflow-hidden shadow-lg">
                            <input type="text" className="flex-1 p-4 text-xl outline-none" placeholder="Enter URL..." value={inputUrl} onChange={e => setInputUrl(e.target.value)}/>
                            <button className="bg-black text-white px-8 font-bold">GO</button>
                        </form>
                         <p className="mt-4 text-center text-sm text-gray-400">Try: chenmo-space.top</p>
                    </div>
                </div>
            );

            return (
                <div className={`h-screen w-full bg-[#121212] flex flex-col items-center justify-center p-4 relative screen-container glitch-container ${isGlitching ? 'glitch-active' : ''}`}>
                    <div className="scanlines"></div>
                    <div className="scan-bar"></div>
                    <div className={`periodic-glitch ${isGlitching ? 'opacity-100' : 'opacity-0'}`}></div>
                    <AudioSystem />
                    
                    <div className="w-full max-w-6xl h-[90vh] bg-white rounded shadow-2xl overflow-hidden flex flex-col relative z-10">
                        <div className="bg-[#f0f0f0] p-2 flex items-center space-x-3 border-b shadow-sm">
                            <div className="flex space-x-2 ml-2 mr-4">
                                <div className="w-3 h-3 rounded-full bg-red-500"></div>
                                <div className="w-3 h-3 rounded-full bg-yellow-500"></div>
                                <div className="w-3 h-3 rounded-full bg-green-500"></div>
                            </div>
                            <button onClick={goBack} disabled={history.length <= 1} className={`text-xl px-2 ${history.length <= 1 ? 'text-gray-300' : 'text-gray-600 hover:text-black'}`}>â†</button>
                            <button onClick={() => navigate("index.html")} className="text-gray-600 hover:text-black text-lg px-2">ğŸ </button>
                            <form onSubmit={(e) => { e.preventDefault(); if(inputUrl === "ending") navigate("ending"); }} className="flex-1">
                                <input className="w-full px-3 py-1 text-sm border rounded-sm" placeholder={url === "index.html" ? "https://chenmo-space.top" : `https://chenmo-space.top/${url}`} value={inputUrl} onChange={e => setInputUrl(e.target.value)}/>
                            </form>
                        </div>
                        <div className="flex-1 relative overflow-hidden bg-white">
                            {renderContent()}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
